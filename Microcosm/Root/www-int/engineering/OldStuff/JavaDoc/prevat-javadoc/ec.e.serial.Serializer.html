<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Wed Apr 16 18:47:54 PDT 1997 -->
<a name="_top_"></a>
<title>
  Class ec.e.serial.Serializer
</title>
</head>
<body>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.e.serial.html">This Package</a>  <a href="Package-ec.e.serial.html">Previous</a>  <a href="ec.e.serial.Unserializer.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class ec.e.serial.Serializer
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----<a href="java.io.OutputStream.html#_top_">java.io.OutputStream</a>
           |
           +----<a href="java.io.FilterOutputStream.html#_top_">java.io.FilterOutputStream</a>
                   |
                   +----<a href="java.io.DataOutputStream.html#_top_">java.io.DataOutputStream</a>
                           |
                           +----ec.e.serial.Serializer
</pre>
<hr>
<dl>
  <dt> public class <b>Serializer</b>
  <dt> extends <a href="java.io.DataOutputStream.html#_top_">DataOutputStream</a>
</dl>
Loosely based on both RtStandardEncoder and TypeTable.  The
encoding format is a binary form of typed scheme s-expressions.
Positive index numbers are like variable names--they refer to
values which are already bound to these numbers.  The pre-existing
bindings are two->null, three->a StringOpener, and four->an
OpenerChef.  References to these objects are 
just to their index.  When a not-yet-encoded object is encountered,
output an expression to produce a corresponding object on
decode, as well as assigning it a number for future references. <p>
The expression consists of APPLY--the moral equivalent of the
s-expression's open paren and represented by the number one, an
Opener--the moral equivalent of the function being applied, and the
arguments.  Unlike scheme functions, the Opener provides a static
type signature.  As a result, arguments statically typed as scalars
can be encoded directly with no extra overhead.  Further, no close
parent is needed since the static signature specifies the number of
arguments.  The Opener and its non-scalar arguments are themselves
encoded as s-expressions. <p>
An Opener's static signature further divides the argument list into
two parts: the preface and the body.  The preface arguments are
read first.  Using these the object is made and registered under a
newly assiged number.  Then the body arguments are read and used to
further initialize the object.  Only data needed to create the
object at all should be in the preface.  In particular, the object
itself shouldn't be reachable from the preface, because there's no
way to break the resulting circularity.  Circular references from
the body args are fine, as the object is already registered. <p>
One special case: for arrays, the length is the preface since it is
needed to create the array.  However, the body args cannot be
specified by a static signature, so arrays are just understood as
consisting of 'length' repetitions of whatever the element
signature declares.
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#Serializer(java.io.OutputStream, ec.e.openers.OpenerRecipe)"><b>Serializer</b></a>(OutputStream, OpenerRecipe)
  <dd> The new Serializer will output onto 'out', using 'maker' to
determine what Opener to use for which object.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#encodeObj(java.lang.Object)"><b>encodeObj</b></a>(Object)
  <dd> Encode 'obj' as an s-expression.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#encodeObject(java.lang.Object)"><b>encodeObject</b></a>(Object)
  <dd> Encode 'obj' as an s-expression.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getBytes()"><b>getBytes</b></a>()
  <dd> 
Method from RtEncoder that Serializer should not implement 

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getProperties()"><b>getProperties</b></a>()
  <dd> 
Method from RtEncoder that Serializer should not implement 

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#numObjects()"><b>numObjects</b></a>()
  <dd> Really, how many indexes are assigned.
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="Serializer"></a>
<a name="Serializer(java.io.OutputStream, ec.e.openers.OpenerRecipe)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>Serializer</b>
<pre>
  public Serializer(<a href="java.io.OutputStream.html#_top_">OutputStream</a> out,
                    <a href="ec.e.openers.OpenerRecipe.html#_top_">OpenerRecipe</a> maker)
</pre>
<dl>
  <dd> The new Serializer will output onto 'out', using 'maker' to
determine what Opener to use for which object.
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="encodeObject(java.lang.Object)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="encodeObject"><b>encodeObject</b></a>
<pre>
  public void encodeObject(<a href="java.lang.Object.html#_top_">Object</a> obj)
</pre>
<dl>
  <dd> Encode 'obj' as an s-expression.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> obj - nullOk;
  </dl>
</dl>
<a name="encodeObj(java.lang.Object)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="encodeObj"><b>encodeObj</b></a>
<pre>
  public void encodeObj(<a href="java.lang.Object.html#_top_">Object</a> obj) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Encode 'obj' as an s-expression.
  <dl>
    <dt> <b>Parameters:</b>
    <dd> obj - nullOk;
  </dl>
</dl>
<a name="getProperties()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getProperties"><b>getProperties</b></a>
<pre>
  public <a href="ec.util.ReadOnlyHashtable.html#_top_">ReadOnlyHashtable</a> getProperties()
</pre>
<dl>
  <dd> Method from RtEncoder that Serializer should not implement
</dl>
<a name="getBytes()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getBytes"><b>getBytes</b></a>
<pre>
  public byte[] getBytes()
</pre>
<dl>
  <dd> Method from RtEncoder that Serializer should not implement
</dl>
<a name="numObjects()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="numObjects"><b>numObjects</b></a>
<pre>
  public int numObjects()
</pre>
<dl>
  <dd> Really, how many indexes are assigned.  This is one more than
the highest index which has been assigned.
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.e.serial.html">This Package</a>  <a href="Package-ec.e.serial.html">Previous</a>  <a href="ec.e.serial.Unserializer.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
