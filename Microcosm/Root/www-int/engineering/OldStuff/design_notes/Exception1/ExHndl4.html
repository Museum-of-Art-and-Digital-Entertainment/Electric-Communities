<!--NewPage--><!-- Created by Masa Maeda and Arturo Bejar on 06.04.97  --><!-- Copyright 1997 Electric Communitites. --><!-- All rights reserved worldwide.  --><!-- Proprietary and confidential. --><HTML><HEAD><pre><a href="ExHndl3.html">Previous</a>  <a href="ExHndl5.html">Next</a>  <a href="ExHndlI.html">Index</a>  <a href="http://www-int.communities.com">EC internal web page</a></pre><TITLE>Exception Handling: Page 4</TITLE></HEAD><BODY><P><HR WIDTH="100%" SIZE=2></P><P>&nbsp;</P><B><P>Allegro Assai: Last Successful</P></B><B><P>A synchronous approach to exception handling.</P></B><P>The second approach consists on keeping track of the last successful line of computation. Doing so avoids the problem discussed in the previous movement. This approach works fine if the semantics specifies that the order in which lines of computation succeed is irrelevant but fails otherwise. That is, if two lines of computation 'A' and 'B' are sent into the runtime 'A' before 'B' and 'A' finalizes its process after 'B' then it is 'A' and not 'B' which is recorded as last successful.</P><P>As can be seen in the code below the last successful line of computation registered is the one utilized to recover from the exception Thrown. This ensures that no matter the order or number of exceptions thrown, computation will always return to the last one that succeded. Of course if none succeeds then a null value is returned.</P><P><HR WIDTH="90%" SIZE=3></P><PRE>	eclass Foo {	  Bud myLastBud;	  Bud myPreviousState;	  method uFoo(Bar bar, Bud bud) {	    Bud oldBud;	    oldBud = myLastBud;	    ewhen successful (...) {	      myPreviousState = oldBud;	    }	    etry {	      bar &lt- uBar(bud, &successful);	    } ecatch {	      myLastBud = myPreviousState;	    }	  }	}</PRE><P><HR WIDTH="90%" SIZE=3></P><P>The instance variable <FONT FACE="Courier">myLastBud</FONT> is restored to the last successful line of computation whenever an exception is thrown. <FONT FACE="Courier">myPreviousState</FONT> is updated only if the optimistic line of computation succeds. Success news are sent via the boolean parameter <FONT FACE="Courier">successful</FONT>.</P><P>A significant drawback is the need to include an ewhen structure to do the update when optimistic computation succeeds. This is computationally expensive because degrades performance and requires the return parameter <FONT FACE="Courier">&success</FONT> to inform success of computation	(so much for optimism...).</P><P><HR WIDTH="100%" SIZE=2></P><pre><a href="ExHndl3.html">Previous</a>  <a href="ExHndl5.html">Next</a>  <a href="ExHndlI.html">Index</a>  <a href="http://www-int.communities.com">EC internal web page</a></pre></BODY></HTML>