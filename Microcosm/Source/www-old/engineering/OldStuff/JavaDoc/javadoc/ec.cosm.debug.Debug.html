<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Mon Mar 31 11:09:22 PST 1997 -->
<a name="_top_"></a>
<title>
  Class ec.cosm.debug.Debug
</title>
</head>
<body>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.cosm.debug.html">This Package</a>  <a href="Package-ec.cosm.debug.html">Previous</a>  <a href="Package-ec.cosm.debug.html">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class ec.cosm.debug.Debug
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----ec.cosm.debug.Debug
</pre>
<hr>
<dl>
  <dt> public class <b>Debug</b>
  <dt> extends <a href="java.lang.Object.html#_top_">Object</a>
</dl>
Class to make debugging statements a little easier. Built on the
E Trace utility.
<p>
Allows you to set different priority levels so you can show all tracing
messages or just the important ones, and allows you to send tracing
messages to a stream or file.
<p>
Allows you to enable and disable tracing by topic. Each topic has an
array of trace objects, one for each priority level. You can disable
or enable all tracing on a topic, or disable tracing below a certain
threshold for the topic.
<p>
Allows you test whether or not a message would print before trying to
print it. In Java you often concatenate strings when printing e.g.
<code>
  println("[mypackage] x = " + somevar);
</code>
It's costly to do lots of these concatenations; it's much better to
do:
<code>
  if (trace.tracing) trace.$("x = " + somevar);
</code>
IMPORTANT: this is a debugging facility. It is NOT secure (because it
allows others to tweak your debugging levels). Debugging statements
should be stripped out before shipping!
<p>
EXAMPLE OF USE:
At start of file:
<code>
  import ec.e.run.Trace;
  import ec.cosm.debug.Debug;
</code>
In class initialization:
<code>
  static Trace TheDebugTrace = Debug.getTrace("myclass", Debug.DEBUG);
</code>
In code, for a frequently executed debug message
<code>
  if (TheDebugTrace.tracing) TheDebugTrace.$("... msg ... ");
</code>
Note the check on 'tracing' which avoids the expense of a method call
and of any string concatenations in arguments to $. For a rarely
executed message (e.g. a serious error) you could do:
<code>
  Debug.getTrace("myclass", Debug.ERROR).$("... msg ...");
</code>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#DEBUG"><b>DEBUG</b></a>
  <dd> Priority for normal debugging messages.
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#ERROR"><b>ERROR</b></a>
  <dd> Priority for error messages; use for serious errors only.
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#FILE_NAME_MODE"><b>FILE_NAME_MODE</b></a>
  <dd> Trace mode flag - prefix trace messages with filenames instead of
method names

  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#LINE_NUMBER_MODE"><b>LINE_NUMBER_MODE</b></a>
  <dd> Trace mode flag - prefix trace messages with line number

  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MAX_PRIORITY"><b>MAX_PRIORITY</b></a>
  <dd> Max priority
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MIN_PRIORITY"><b>MIN_PRIORITY</b></a>
  <dd> Min priority
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#N_PRIORITIES"><b>N_PRIORITIES</b></a>
  <dd> Number of priorities
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#PRIORITY_NAMES"><b>PRIORITY_NAMES</b></a>
  <dd> Priority names

  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#SPAM"><b>SPAM</b></a>
  <dd> Priority for very detailed, extensive messages.
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#WARNING"><b>WARNING</b></a>
  <dd> Priority for warning messages; warning messages are more important than
debugging messages but are still not printed unless explictly enabled.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getDefaultOutput()"><b>getDefaultOutput</b></a>()
  <dd> Get the default output stream.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getDefaultThreshold()"><b>getDefaultThreshold</b></a>()
  <dd> Get the default threshold

  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getOutput(java.lang.String)"><b>getOutput</b></a>(String)
  <dd> Get the output stream for the given topic.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getThreshold(java.lang.String)"><b>getThreshold</b></a>(String)
  <dd> Get the threshold for the given topic.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getTopic(java.lang.String)"><b>getTopic</b></a>(String)
  <dd> Return the debug topic object for the given topic (topic names
are not case sensitive).
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getTrace(java.lang.String, int)"><b>getTrace</b></a>(String, int)
  <dd> Return the Trace object for the given topic and priority (topic
names are not case sensitive).
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getTrace(java.lang.String, int, int)"><b>getTrace</b></a>(String, int, int)
  <dd> Convenience method which gets the trace object for the given topic and
priority, then sets its flags according to the 'flags' argument.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#init(ec.e.cap.EEnvironment)"><b>init</b></a>(EEnvironment)
  <dd> Initialize the debugging system.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#processCommand(java.lang.String)"><b>processCommand</b></a>(String)
  <dd> Process a command - used to tweak debugging levels while a program
is running.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setDefaultOutput(java.io.OutputStream)"><b>setDefaultOutput</b></a>(OutputStream)
  <dd> Set the default output stream.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setDefaultOutputFile(java.lang.String)"><b>setDefaultOutputFile</b></a>(String)
  <dd> Set the default output stream to the given file.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setDefaultThreshold(int)"><b>setDefaultThreshold</b></a>(int)
  <dd> Set the default threshold.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setOutput(java.lang.String, java.io.OutputStream)"><b>setOutput</b></a>(String, OutputStream)
  <dd> Set the output stream for the given topic.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setOutputFile(java.lang.String, java.lang.String)"><b>setOutputFile</b></a>(String, String)
  <dd> Set the output stream for the given topic to a file.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setThreshold(java.lang.String, int)"><b>setThreshold</b></a>(String, int)
  <dd> Set the threshold for the given topic.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#updateTopics()"><b>updateTopics</b></a>()
  <dd> Update all topics after default threshold or stream has been
changed

</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="SPAM"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>SPAM</b>
<pre>
  public final static int SPAM
</pre>
<dl>
  <dd> Priority for very detailed, extensive messages. Spam messages
are the least important type of message. They are not printed unless
they are explicitly enabled.
</dl>
<a name="DEBUG"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>DEBUG</b>
<pre>
  public final static int DEBUG
</pre>
<dl>
  <dd> Priority for normal debugging messages. Normal debugging messages
are still low priority. They are not printed unless they are explicitly
enabled.
</dl>
<a name="WARNING"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>WARNING</b>
<pre>
  public final static int WARNING
</pre>
<dl>
  <dd> Priority for warning messages; warning messages are more important than
debugging messages but are still not printed unless explictly enabled.
</dl>
<a name="ERROR"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>ERROR</b>
<pre>
  public final static int ERROR
</pre>
<dl>
  <dd> Priority for error messages; use for serious errors only. These messages
are always printed.
</dl>
<a name="MIN_PRIORITY"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MIN_PRIORITY</b>
<pre>
  public final static int MIN_PRIORITY
</pre>
<dl>
  <dd> Min priority
</dl>
<a name="MAX_PRIORITY"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MAX_PRIORITY</b>
<pre>
  public final static int MAX_PRIORITY
</pre>
<dl>
  <dd> Max priority
</dl>
<a name="N_PRIORITIES"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>N_PRIORITIES</b>
<pre>
  public final static int N_PRIORITIES
</pre>
<dl>
  <dd> Number of priorities
</dl>
<a name="PRIORITY_NAMES"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>PRIORITY_NAMES</b>
<pre>
  public final static <a href="java.lang.String.html#_top_">String</a> PRIORITY_NAMES[]
</pre>
<dl>
  <dd> Priority names
</dl>
<a name="FILE_NAME_MODE"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>FILE_NAME_MODE</b>
<pre>
  public final static int FILE_NAME_MODE
</pre>
<dl>
  <dd> Trace mode flag - prefix trace messages with filenames instead of
method names
</dl>
<a name="LINE_NUMBER_MODE"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>LINE_NUMBER_MODE</b>
<pre>
  public final static int LINE_NUMBER_MODE
</pre>
<dl>
  <dd> Trace mode flag - prefix trace messages with line number
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="init(ec.e.cap.EEnvironment)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="init"><b>init</b></a>
<pre>
  public static void init(<a href="ec.e.cap.EEnvironment.html#_top_">EEnvironment</a> env)
</pre>
<dl>
  <dd> Initialize the debugging system. Looks for a property called "debug"
in 'env'. Properties can be set via the command line e.g. "debug=low"
<p>
The property can be a colon separated list of commands. For details
of what a command looks like, see the documenation for processCommand
<p>
Remember commands can be concatenated with : e.g:
debug=warning:io,debug,io.log
</dl>
<a name="processCommand(java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="processCommand"><b>processCommand</b></a>
<pre>
  public static void processCommand(<a href="java.lang.String.html#_top_">String</a> command)
</pre>
<dl>
  <dd> Process a command - used to tweak debugging levels while a program
is running. From normal code you can just use the set/get methods
on Debug and DebugTopic. 'processCommand' allows you to pass
in a string (presumably typed by the user). 'processCommand' then
does some simple parsing and calls the set methods for you.
<p>
Each command can be a comma separated list of up to 3 words.
<p>
1) A single word command is a priority or topic name. If the word is
"spam", "debug", "warning" or "error" it is used as the default
priority threshold. Otherwise it is used as a topic name; the
threshold for that topic is set to "debug". As you will see, You
can set the threshold for a topic explicitly, but it is very
common to enable debugging messages for a topic and the single
word command makes this common operation easy.
debug=warning    set default threshold to warning
debug=io         set threshold for io to debug
<p>
2) Two words are taken as a topic and a priority. The command just
affects debugging for that topic. e.g:
debug=io,warning set debug threshold to warning for "io" messages
<p>
3) Three words are taken as a topic, priority and filename e.g:
debug=io,debug,io.log    show all io messages and send them to io.log
</dl>
<a name="getTopic(java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getTopic"><b>getTopic</b></a>
<pre>
  public static <a href="ec.cosm.debug.DebugTopic.html#_top_">DebugTopic</a> getTopic(<a href="java.lang.String.html#_top_">String</a> topic)
</pre>
<dl>
  <dd> Return the debug topic object for the given topic (topic names
are not case sensitive). Creates a new one if there isn't one
already. You can keep a handle to a debug topic to avoid doing
a hash lookup whenever you want to print about a given
topic. e.g. in your class initialization you could do:
<p><code>
DebugTopic myTopic = Debug.getTopic("myclass");
</code><p>
Then, in your code:
<p><code>
myTopic.getTrace(Debug.DEBUG).$("... msg ..");
</code><p>
If you are printing messages very frequently you should get a
handle to the actual trace object and use that; see getTrace.
</dl>
<a name="getTrace(java.lang.String, int)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getTrace"><b>getTrace</b></a>
<pre>
  public static <a href="ec.e.run.Trace.html#_top_">Trace</a> getTrace(<a href="java.lang.String.html#_top_">String</a> topic,
                               int priority)
</pre>
<dl>
  <dd> Return the Trace object for the given topic and priority (topic
names are not case sensitive). Creates a new one if there isn't
one already. You can keep a handle to this trace object to
minimize execution cost when printing messages.  e.g. if you
print a lot of debug messages in a given class, do this at
class initialization:
<p><code>
static Trace TheDebugTrace = Debug.getTrace("myclass", Debug.DEBUG);
</code><p>
Then, in your code:
<p><code>
if (TheDebugTrace.tracing) TheDebugTrace.$("... msg ..");
</code><p>
</dl>
<a name="getTrace(java.lang.String, int, int)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getTrace"><b>getTrace</b></a>
<pre>
  public static <a href="ec.e.run.Trace.html#_top_">Trace</a> getTrace(<a href="java.lang.String.html#_top_">String</a> topic,
                               int priority,
                               int flags)
</pre>
<dl>
  <dd> Convenience method which gets the trace object for the given topic and
priority, then sets its flags according to the 'flags' argument. 'flags'
should be some combination of FILE_NAME_MODE and LINE_NUMBER_MODE,
combined using the | operator. (e.g. FILE_NAME_MODE | LINE_NUMBER_MODE).
<p>
If FILE_NAME_MODE is set in flags, trace messages for this Trace object
will be preceded by the file name. If it is not set the trace messages
will be preceded by the method name.
Note; the underlying Trace object doesn't allow you to turn off both
method names AND file names. Should it?
<p>
If LINE_NUMBER_MODE is set in flags, trace messages for this Trace
object will be preceded by a line number. If LINE_NUMBER_MODE is not
set, the messages will not be preceded by the line number.
<p>
If you specify 0 for flags (i.e. turn off both FILE_NAME_MODE and
LINE_NUMBER_MODE)  you'll just get  method names, with no line
number.
<p>
If you use the normal 'getTrace' call, with no flags arguments,
you do not affect the flags in the Trace object. By default, newly
created trace objects have file name mode off and line numbering on
(but remember 'getTrace' doesn't always create a new Trace object
so you can't rely on those defaults being in place).
<p>
For more control, you can use the methods 'lineMode', 'fileMode'
etc. on the trace object.
  <dl>
    <dt> <b>See Also:</b>
    <dd> <a href="#getTrace(String, int)">getTrace</a>
  </dl>
</dl>
<a name="setDefaultThreshold(int)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setDefaultThreshold"><b>setDefaultThreshold</b></a>
<pre>
  public static void setDefaultThreshold(int priority)
</pre>
<dl>
  <dd> Set the default threshold. Messages with less than this priority will
not get printed (unless their topic topic is set to a different
threshold).
<p>
The initial default threshold is ERROR
</dl>
<a name="getDefaultThreshold()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getDefaultThreshold"><b>getDefaultThreshold</b></a>
<pre>
  public static int getDefaultThreshold()
</pre>
<dl>
  <dd> Get the default threshold
</dl>
<a name="setThreshold(java.lang.String, int)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setThreshold"><b>setThreshold</b></a>
<pre>
  public static void setThreshold(<a href="java.lang.String.html#_top_">String</a> topic,
                                  int priority)
</pre>
<dl>
  <dd> Set the threshold for the given topic. The topic name is not case
sensitive. Messages on this topic with less than this priority will
not get printed
</dl>
<a name="getThreshold(java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getThreshold"><b>getThreshold</b></a>
<pre>
  public static int getThreshold(<a href="java.lang.String.html#_top_">String</a> topic)
</pre>
<dl>
  <dd> Get the threshold for the given topic. Topic name is not case
sensitive.
</dl>
<a name="setDefaultOutput(java.io.OutputStream)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setDefaultOutput"><b>setDefaultOutput</b></a>
<pre>
  public static void setDefaultOutput(<a href="java.io.OutputStream.html#_top_">OutputStream</a> out)
</pre>
<dl>
  <dd> Set the default output stream. Messages will be sent to this stream
unless they have a topic specific output stream set up. If the stream
is not already a print stream, a new print stream (with auto flush
turned on) is wrapped round it.
<p>
The initial default output stream is System.out.
</dl>
<a name="setDefaultOutputFile(java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setDefaultOutputFile"><b>setDefaultOutputFile</b></a>
<pre>
  public static void setDefaultOutputFile(<a href="java.lang.String.html#_top_">String</a> filename) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Set the default output stream to the given file. A buffered output
stream is used. The special strings "stdout" and "stderr" are
recognized as the names of the standard input and output "files"
</dl>
<a name="getDefaultOutput()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getDefaultOutput"><b>getDefaultOutput</b></a>
<pre>
  public static <a href="java.io.PrintStream.html#_top_">PrintStream</a> getDefaultOutput()
</pre>
<dl>
  <dd> Get the default output stream.
</dl>
<a name="setOutput(java.lang.String, java.io.OutputStream)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setOutput"><b>setOutput</b></a>
<pre>
  public static void setOutput(<a href="java.lang.String.html#_top_">String</a> topic,
                               <a href="java.io.OutputStream.html#_top_">OutputStream</a> out)
</pre>
<dl>
  <dd> Set the output stream for the given topic. Topic name is not case
sensitive.
</dl>
<a name="setOutputFile(java.lang.String, java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setOutputFile"><b>setOutputFile</b></a>
<pre>
  public static void setOutputFile(<a href="java.lang.String.html#_top_">String</a> topic,
                                   <a href="java.lang.String.html#_top_">String</a> filename) throws <a href="java.io.IOException.html#_top_">IOException</a>
</pre>
<dl>
  <dd> Set the output stream for the given topic to a file. Topic name is
not case sensitive. "stdout" or "stderr" can be used instead of a
filename.
</dl>
<a name="getOutput(java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getOutput"><b>getOutput</b></a>
<pre>
  public static <a href="java.io.PrintStream.html#_top_">PrintStream</a> getOutput(<a href="java.lang.String.html#_top_">String</a> topic)
</pre>
<dl>
  <dd> Get the output stream for the given topic. Topic name is not case
sensitive.
</dl>
<a name="updateTopics()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="updateTopics"><b>updateTopics</b></a>
<pre>
  public static synchronized void updateTopics()
</pre>
<dl>
  <dd> Update all topics after default threshold or stream has been
changed
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.cosm.debug.html">This Package</a>  <a href="Package-ec.cosm.debug.html">Previous</a>  <a href="Package-ec.cosm.debug.html">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
