<!--NewPage--><!-- Created by Masa Maeda and Arturo Bejar on 06.04.97  --><!-- Copyright 1997 Electric Communitites. --><!-- All rights reserved worldwide.  --><!-- Proprietary and confidential. --><HTML><HEAD><pre><a href="ExHndl2.html">Previous</a>  <a href="ExHndl4.html">Next</a>  <a href="ExHndlI.html">Index</a>  <a href="http://www-int.communities.com">EC internal web page</a></pre><TITLE>Exception Handling: Page 3</TITLE></HEAD><BODY><P><HR WIDTH="100%" SIZE=2></P><P>&nbsp;</P><B><P>Andante: Previous State</P></B><P>The first approach with consists on having an E object that receives a message and stores an instance variable contingent on a message which it sends. This allows to 'backtrack' to the previous state has an exception occurred.</P><P>The code below as well as Figure2 show this approach. <FONT FACE="Courier">oldID</FONT> is the instance variable contingent on <FONTFACE="Courier">uBar</FONT>. If an exception occurs then the instance variable, <FONT FACE="Courier">myLastBud</FONT> should get restored to its previous value.</P><P><HR WIDTH="90%" SIZE=3></P><PRE>	eclass Foo {	  int myID;	  Bud myLastBud;	  method uFoo(Bar bar, Bud bud) {	    Bud oldBud;	    myID++;	    int oldID = myID;		oldBud = myLastBud;	    etry {	      bar &lt- uBar(bud);	    } ecatch {	      if(oldID == myID) {	        myLastBud = oldBud;	      }	    }	  }	}</PRE><P><HR WIDTH="90%" SIZE=3></P><h2><IMG SRC="ExHndlFig2.gif" WIDTH="500" HEIGHT="200" HSPACE="40"></h2><P ALIGN="CENTER">Figure 2. Contingent instance variable to resolve exceptions</P><P><HR WIDTH="90%" SIZE=3></P><P>Notice that in this approach if, for example, 'B' throws an exception then its ecatch refers to 'A'. Similarly, if 'C' throws an exception then ecatch of the line of computation to the instance variable is set by either 'A' or 'C'.  This implies the possibility of having ecatch revert to the wrong instance variable. So, for example, if 'C' throws after 'B' did so too computation fails to refer to 'A' and refers erroneously to 'B' instead.</P><P>The versatility of this approach lies on its asynchronicity. No particular restriction exists over how to rever to a previous state, if any.</P><P><HR WIDTH="100%" SIZE=2></P><pre><a href="ExHndl2.html">Previous</a>  <a href="ExHndl4.html">Next</a>  <a href="ExHndlI.html">Index</a>  <a href="http://www-int.communities.com">EC internal web page</a></pre></BODY></HTML>