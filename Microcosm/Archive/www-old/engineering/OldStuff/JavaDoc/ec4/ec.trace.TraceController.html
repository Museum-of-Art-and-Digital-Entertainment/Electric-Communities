<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Wed May 20 22:30:26 PDT 1998 -->
<title>
  Class ec.trace.TraceController
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.trace.html">This Package</a>  <a href="ec.trace.Trace.html#_top_">Previous</a>  <a href="Package-ec.trace.html">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class ec.trace.TraceController
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----ec.trace.TraceController
</pre>
<hr>
<dl>
  <dt> public class <b>TraceController</b>
  <dt> extends <a href="java.lang.Object.html#_top_">Object</a>
  <dt> implements TraceConstants
</dl>
The single trace controller manages all the trace classes.  Most
 notably, it has one TraceSubsystemMediator for each subsystem
 being traced.  A TraceSubsystemMediator may mediate several Trace
 objects.  Messages sent to those trace objects are forwarded to the
 mediator.  The mediator, under the control of the TraceController,
 sends the message on to TraceMessageAcceptors that are ready to
 accept messages.  The two current TraceMessageAcceptors are the
 TraceLog and the TraceBuffer.  Once upon a time, there was a third,
 the TraceDisplay, which would echo to the screen the contents of
 the TraceBuffer.  However, that proved impractical in the current
 build environment.
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#TraceController()"><b>TraceController</b></a>()
  <dd> 
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#changeDisplay(boolean)"><b>changeDisplay</b></a>(boolean)
  <dd>  Request that the trace buffer be visible in a window.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#dumpBufferToLog()"><b>dumpBufferToLog</b></a>()
  <dd>  Take the contents of the internal trace buffer and
 add them to the on-disk log.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#errorWatcher(ec.trace.TraceErrorWatcher, boolean)"><b>errorWatcher</b></a>(TraceErrorWatcher, boolean)
  <dd>  Register or unregister as a TraceErrorWatcher.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#mayUseUI()"><b>mayUseUI</b></a>()
  <dd> 
 Invoke this to tell the TraceController that a display is 
 ready to use.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#newTrace(ec.trace.Trace, java.lang.String)"><b>newTrace</b></a>(Trace, String)
  <dd>  This is called by a Trace constructor to inform the Trace
 Controller that it exists.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#notifyFatal()"><b>notifyFatal</b></a>()
  <dd>  Notify a user that a fatal error has happened.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#notifyOptional()"><b>notifyOptional</b></a>()
  <dd>  If the user wants to hear about nonfatal bugs, notify her.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setProperties(java.util.Properties)"><b>setProperties</b></a>(Properties)
  <dd>  This method updates a trace controller from a given
 set of properties.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setProperty(java.lang.String, java.lang.String)"><b>setProperty</b></a>(String, String)
  <dd> 
 If the given Key names a tracing property, process its value.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#start(java.util.Properties)"><b>start</b></a>(Properties)
  <dd>  This routine is used to start the Trace Controller.
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="TraceController"></a>
<a name="TraceController()"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>TraceController</b>
<pre>
 public TraceController()
</pre>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="start(java.util.Properties)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="start"><b>start</b></a>
<pre>
 public static void start(<a href="java.util.Properties.html#_top_">Properties</a> p)
</pre>
<dl>
  <dd> This routine is used to start the Trace Controller.  Prior to
 this call, Trace objects may be obtained and messages may be
 sent to them.  However, the messages will be queued up until
 this routine is called.  (Note that the messages will be
 governed by the default thresholds.)
 <p>
 Note: This routine may be called before the user interface is
 available.  This allows on-disk logging to be useful in the 
 case the system fails before the UI is initialized.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> p - the initial set of properties provided by the user.
 They override the defaults.  They may be changed later.
  </dl></dd>
</dl>
<a name="mayUseUI()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="mayUseUI"><b>mayUseUI</b></a>
<pre>
 public static void mayUseUI()
</pre>
<dl>
  <dd> Invoke this to tell the TraceController that a display is 
 ready to use.
<p>
</dl>
<a name="notifyFatal()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="notifyFatal"><b>notifyFatal</b></a>
<pre>
 public static void notifyFatal()
</pre>
<dl>
  <dd> Notify a user that a fatal error has happened.  Tell her how to
 report the bug.  Normally does not return.
 <p>
 If this method is called before a TraceErrorWatcher has
 registered, it's not clear what the best thing to do is.  For
 the moment, we log that as an error and return, in the hopes
 that the system will hobble along a bit further to the point
 where a watcher registers and a later notifyFatal causes the
 user to be notified.
<p>
</dl>
<a name="notifyOptional()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="notifyOptional"><b>notifyOptional</b></a>
<pre>
 public static void notifyOptional()
</pre>
<dl>
  <dd> If the user wants to hear about nonfatal bugs, notify her.
 Does return.
 <p>
 It is a (non-fatal) error if no object has registered as a
 TraceErrorWatcher.
<p>
</dl>
<a name="errorWatcher(ec.trace.TraceErrorWatcher, boolean)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="errorWatcher"><b>errorWatcher</b></a>
<pre>
 public static void errorWatcher(<a href="ec.trace.TraceErrorWatcher.html#_top_">TraceErrorWatcher</a> aTraceErrorWatcher,
                                 boolean add)
</pre>
<dl>
  <dd> Register or unregister as a TraceErrorWatcher.
 <p>
 This is kind of a stupid interface.  I didn't think it through
 before "publishing" it.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> aTraceErrorWatcher - the object to be informed of an error.
    <dd> add - true if the object is to be added, false if it's to
 be removed.  It's not an error to add without first removing, or
 to remove without first adding, but it does provoke a warning.
  </dl></dd>
</dl>
<a name="dumpBufferToLog()"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="dumpBufferToLog"><b>dumpBufferToLog</b></a>
<pre>
 public static void dumpBufferToLog()
</pre>
<dl>
  <dd> Take the contents of the internal trace buffer and
 add them to the on-disk log.
<p>
</dl>
<a name="setProperties(java.util.Properties)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setProperties"><b>setProperties</b></a>
<pre>
 public static void setProperties(<a href="java.util.Properties.html#_top_">Properties</a> p)
</pre>
<dl>
  <dd> This method updates a trace controller from a given
 set of properties.
 <p>
 IMPORTANT:  The properties are processed in an unpredictable
 order.
<p>
</dl>
<a name="setProperty(java.lang.String, java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setProperty"><b>setProperty</b></a>
<pre>
 public static void setProperty(<a href="java.lang.String.html#_top_">String</a> key,
                                <a href="java.lang.String.html#_top_">String</a> value)
</pre>
<dl>
  <dd> If the given Key names a tracing property, process its value.
 It is not an error for the key to have nothing to do with
 tracing; in that case, it's ignored.
 <p>
 It is an error for the value to be null.
<p>
</dl>
<a name="changeDisplay(boolean)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="changeDisplay"><b>changeDisplay</b></a>
<pre>
 public static void changeDisplay(boolean showIt)
</pre>
<dl>
  <dd> Request that the trace buffer be visible in a window.
 XXX This cannot be made to work given the current layering
 of the system / build environment.  It should probably be
 thrown out.
<p>
</dl>
<a name="newTrace(ec.trace.Trace, java.lang.String)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="newTrace"><b>newTrace</b></a>
<pre>
 protected static void newTrace(<a href="ec.trace.Trace.html#_top_">Trace</a> requester,
                                <a href="java.lang.String.html#_top_">String</a> subsystem)
</pre>
<dl>
  <dd> This is called by a Trace constructor to inform the Trace
 Controller that it exists.  The end result of this call is that
 a TraceSubsystemMediator exists for the Trace object's
 subsystem, and the Trace object has been initialized with the
 values it caches.
<p>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.trace.html">This Package</a>  <a href="ec.trace.Trace.html#_top_">Previous</a>  <a href="Package-ec.trace.html">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
