<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Thu Mar 06 17:45:34 PST 1997 -->
<a name="_top_"></a>
<title>
  Class UserDBTester
</title>
</head>
<body>
<h1>
  Class UserDBTester
</h1>
<pre>
<a href="java.lang.Object.html#_top_">java.lang.Object</a>
   |
   +----UserDBTester
</pre>
<hr>
<dl>
  <dt> class <b>UserDBTester</b>
  <dt> extends <a href="java.lang.Object.html#_top_">Object</a>
</dl>
<blockquote>
<pre>
<p>
Simple test program for trying out JDBC using the 
shareware mSQL database.
</p>
<p>
Couple things are required to use this...
  1) mSQLd 1.0.16 needs to be running somewhere (currently it is on gracie).
  2) You need the 0.9.6 jdbc-msql driver in your classpath.
  3) java 1.0.2.
  3) jdbc 1.10
</p>
<p>
mSQL2.0 will not work -- there is no jdbc driver available.
</p>
<p>
This has only been tested with 1.0.2 on Solaris.. It also will work
on win32 but you need the jdbs-msql driver/classes plus 1.10 jdbc
installed there also.  There is a version of mSQLd for win32.
Likewise this app should be able to talk to mSQLd on Solaris
from a win32 box.
</p>
<p>
This app demonstrates the basic JDBC SQL commands for adding,
deleting, and retrieving records from a database.  The database
is a simple table containing the following columns...
+-----------------+----------+--------+----------+-----+
|     Field       |   Type   | Length | Not Null | Key |
+-----------------+----------+--------+----------+-----+
| user_id         | int      | 4      | Y        | Y   |
| email_addr      | char     | 40     | N        | N   |
| first_name      | char     | 15     | N        | N   |
| middle_iniital  | char     | 2      | N        | N   |
| last_name       | char     | 15     | N        | N   |
| acct_status     | int      | 4      | N        | N   |
| street_addr1    | char     | 80     | N        | N   |
| street_addr2    | char     | 80     | N        | N   |
| city            | char     | 80     | N        | N   |
| state           | char     | 80     | N        | N   |
| zip_code        | char     | 10     | N        | N   |
| country         | char     | 32     | N        | N   |
| paid_up_till    | int      | 4      | N        | N   |
| avatar1_id      | int      | 4      | N        | N   |
| avatar2_id      | int      | 4      | N        | N   |
+-----------------+----------+--------+----------+-----+
</p>
<p>
The user_id is unique, and the "next user id" value is kept
in another table called user_id_counter.  It is just a simple
table with one row and one column...
+-----------------+----------+--------+----------+-----+
|     Field       |   Type   | Length | Not Null | Key |
+-----------------+----------+--------+----------+-----+
| next_user_id    | int      | 4      | N        | N   |
+-----------------+----------+--------+----------+-----+
</p>
<p>
The usage for this app is...
</p>
<p>
Add a user to the database...
	java UserDBTester adduser [user fields]
	[user fields] are the following items (don't forget to quote)
		email
		firstname
		middleinitial
		lastname
		streetaddr1
		city
		state
		zipcode
	Currently, all fields have to be there -- hey, its a tester.
</p>
<p>
Show all users in the database (lists out the user_id, 
first/last name and email addr)...
	java UserDBTester dumptbl
</p>
<p>
Delete a user from the database...
	java UserDBTester deleteuser [user_id]
</p>
<p>
Show more fields for a given user_id (prints out more 
fields than dumptbl)...
	java UserDBTester showuser [user_id]
</p>
<p>
Note: adduser uses the user_id_counter table to get and
increment the next_user_id.  Since the increment/update
isn't atomic, two users of UserDBTester could update
at the same time. (mSQL doesn't have a way of incrementing 
and updating a value atomically -- there needs to be
a lock.  Oracle class database servers do.)  
</p>
<p>
Examples of usage:
</p>
<p>
	$ java UserDBTester dumptbl
	dumptbl
	 -- user_id  email_addr  first_name  last_name  --
	1 jeff@communities.com Linda Crilly
	2 jeff@communities.com Jeff Crilly
	3 tony@communities.com Tony Grant
	65 randy@communities.com Randy Farmer
	63 chip@communities.com Chip Mornigstar
	64 harry@communities.com Harry  Richardson
	==== 6 rows returned.
</p>
<p>
	$ java UserDBTester adduser "dana@communities.com" "Dana" " " "Timbrook" "downtown" "Los Gatos" "CA" "99445"  
	adduser
	Adding user
	INSERT INTO .. [verbose SQL command shown here]
</p>
<p>
	$ java UserDBTester dumptbl
	dumptbl
	 -- user_id  email_addr  first_name  last_name  --
	1 jeff@communities.com Linda Crilly
	2 jeff@communities.com Jeff Crilly
	3 tony@communities.com Tony Grant
	65 randy@communities.com Randy Farmer
	63 chip@communities.com Chip Mornigstar
	64 harry@communities.com Harry  Richardson
	66 dana@communities.com Dana Timbrook
	==== 7 rows returned.
</p>
<p>
	$ java UserDBTester deleteuser 64
	   deleteuser
</p>
<p>
	$ java UserDBTester dumptbl
	dumptbl
	 -- user_id  email_addr  first_name  last_name  --
	1 jeff@communities.com Linda Crilly
	2 jeff@communities.com Jeff Crilly
	3 tony@communities.com Tony Grant
	65 randy@communities.com Randy Farmer
	63 chip@communities.com Chip Mornigstar
	66 dana@communities.com Dana Timbrook
	==== 6 rows returned.
</p>
<p>
	$ java UserDBTester showuser 63
	showuser
	stmt.getMaxRows() is 4096
	===================
	Chip Mornigstar
	   otherstreet
	   Palo Alto
	   CA
	   94123
</p>
<p>
	$ java UserDBTester showuser 66
	showuser
	stmt.getMaxRows() is 4096
	===================
	Dana Timbrook
	   downtown
	   Los Gatos
	   CA
	   99445 
</p>
</pre>
</blockquote>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#UserDBTester()"><b>UserDBTester</b></a>()
  <dd> 
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#adduser(java.lang.String[])"><b>adduser</b></a>(String[])
  <dd> adduser -- add a user to the database

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#connect()"><b>connect</b></a>()
  <dd> connect - connect to the database server

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#deleteuser(java.lang.String[])"><b>deleteuser</b></a>(String[])
  <dd> delete a user -- deletes a user by user_id

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#disconnect()"><b>disconnect</b></a>()
  <dd> disconnect - disconnect from the database server

  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#dumptbl()"><b>dumptbl</b></a>()
  <dd> dumptbl -- print out the contents of the user database

  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#main(java.lang.String[])"><b>main</b></a>(String[])
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#showuser(java.lang.String[])"><b>showuser</b></a>(String[])
  <dd> showuser -- show some interesting fields for a user

</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="UserDBTester"></a>
<a name="UserDBTester()"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>UserDBTester</b>
<pre>
  public UserDBTester()
</pre>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="main(java.lang.String[])"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="main"><b>main</b></a>
<pre>
  public static void main(<a href="java.lang.String.html#_top_">String</a> argv[])
</pre>
<a name="connect()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="connect"><b>connect</b></a>
<pre>
  public void connect()
</pre>
<dl>
  <dd> connect - connect to the database server
</dl>
<a name="disconnect()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="disconnect"><b>disconnect</b></a>
<pre>
  public void disconnect()
</pre>
<dl>
  <dd> disconnect - disconnect from the database server
</dl>
<a name="adduser(java.lang.String[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="adduser"><b>adduser</b></a>
<pre>
  public void adduser(<a href="java.lang.String.html#_top_">String</a> argv[])
</pre>
<dl>
  <dd> adduser -- add a user to the database
</dl>
<a name="showuser(java.lang.String[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="showuser"><b>showuser</b></a>
<pre>
  public void showuser(<a href="java.lang.String.html#_top_">String</a> argv[])
</pre>
<dl>
  <dd> showuser -- show some interesting fields for a user
</dl>
<a name="deleteuser(java.lang.String[])"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="deleteuser"><b>deleteuser</b></a>
<pre>
  public void deleteuser(<a href="java.lang.String.html#_top_">String</a> argv[])
</pre>
<dl>
  <dd> delete a user -- deletes a user by user_id
</dl>
<a name="dumptbl()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="dumptbl"><b>dumptbl</b></a>
<pre>
  public void dumptbl()
</pre>
<dl>
  <dd> dumptbl -- print out the contents of the user database
</dl>
</body>
</html>
