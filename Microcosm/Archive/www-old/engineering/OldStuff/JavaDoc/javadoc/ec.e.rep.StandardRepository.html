<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Thu Jul 24 15:45:43 PDT 1997 -->
<title>
  Class ec.e.rep.StandardRepository
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.e.rep.html">This Package</a>  <a href="Package-ec.e.rep.html">Previous</a>  <a href="Package-ec.e.rep.html">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class ec.e.rep.StandardRepository
</h1>
<pre>
java.lang.Object
   |
   +----ec.e.rep.StandardRepository
</pre>
<hr>
<dl>
  <dt> public class <b>StandardRepository</b>
  <dt> extends Object
  <dt> implements <a href="ec.e.rep.steward.SimpleRepository.html#_top_">SimpleRepository</a>
</dl>
The StandardRepository is a kind of Super-Repository that
 aggregates several other Repositories with different
 functionalities and Implements a StandardRepository policy, to be
 used globally as a fundamental service to all code in both the E
 Runtime and applications.<p>
 Currently this means we keep one extras Repository, one
 release/distribution Repository and one RepositoryCache and search
 these three in that order. The policy also dictates default names
 for these (ECHome/Extras, ECHome/Dist and ECHome/Cache) but you can
 override these names by using environment variables named ECHome,
 Extras, Dist, and Cache. <p>
 The Cert repository contains Certificates only and has its own
 API. It is not included in the regular search mechanism.  The Cert
 Repository uses ECHome/Cert directory and can be redirected using
 the Cert environment variable. <p>
 This constructor gets called every time a Vat is started, like at
 system startup time or when reviving from a checkpoint. This same
 Repository is also made globally available to CREW classes through
 the class CrewRepository and its get() method. Note that
 CrewRepository.get() operations take a symbolic string key, whereas
 from the Vat all retrievals use CryptoHash keys. <p>
 The StandardRepository is supposed to only contain immutable
 objects that convey no capabilities. The Repository is also
 read-only, with the possible exception for the Internet cache in
 CacheRepository (not yet implemented). Therefore you could
 conceivably give this to most in-vat objects as needed.<p>
 If you need a Repository to contain capability-giving objects or if
 you want a Repository you can write to at runtime, then you should
 open a regular but distinct Repository for your own purposes - Do
 not attempt to use the StandardRepository.
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#StandardRepository(ec.e.start.EEnvironment)"><b>StandardRepository</b></a>(EEnvironment)
  <dd> 
 Construct a (the) StandardRepository


 
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#ensureDirectory(ec.e.file.EDirectoryRootMaker, ec.e.file.EEditableDirectory, java.lang.String)"><b>ensureDirectory</b></a>(EDirectoryRootMaker, EEditableDirectory, String)
  <dd> 
 Utility method to open a file given an arbitrary path, and to
 create all directories leading down to that path as needed.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#get(java.lang.Object)"><b>get</b></a>(Object)
  <dd> 
 Look for a given key in all caches and repositories we know
 of.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getCertificateHashtable(java.lang.Object)"><b>getCertificateHashtable</b></a>(Object)
  <dd> 
 Returns a certificate hashtable for a given key.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#initialize()"><b>initialize</b></a>()
  <dd> 
 Initializes StandardRepository.
  <dt> <img src="images/green-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#summon(ec.e.start.EEnvironment)"><b>summon</b></a>(EEnvironment)
  <dd> 
 Asks the EEnviroment to summon a StandardRepositoryMaker, and
 returns the StandardRepository it conjures up.
</dl>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="StandardRepository"></a>
<a name="StandardRepository(ec.e.start.EEnvironment)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>StandardRepository</b>
<pre>
 public StandardRepository(EEnvironment env) throws IOException, ClassNotFoundException, IllegalAccessException, InstantiationException
</pre>
<dl>
  <dd> Construct a (the) StandardRepository
<p>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="summon(ec.e.start.EEnvironment)"><img src="images/green-ball.gif" width=12 height=12 alt=" o "></a>
<a name="summon"><b>summon</b></a>
<pre>
 public static <a href="#_top_">StandardRepository</a> summon(EEnvironment eEnv) throws ClassNotFoundException, IllegalAccessException, InstantiationException
</pre>
<dl>
  <dd> Asks the EEnviroment to summon a StandardRepositoryMaker, and
 returns the StandardRepository it conjures up.
<p>
</dl>
<a name="ensureDirectory(ec.e.file.EDirectoryRootMaker, ec.e.file.EEditableDirectory, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="ensureDirectory"><b>ensureDirectory</b></a>
<pre>
 public EDirectoryBase ensureDirectory(EDirectoryRootMaker rootMaker,
                                       EEditableDirectory homeDir,
                                       String path) throws IOException
</pre>
<dl>
  <dd> Utility method to open a file given an arbitrary path, and to
 create all directories leading down to that path as needed.
<p>
</dl>
<a name="initialize()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="initialize"><b>initialize</b></a>
<pre>
 public void initialize() throws IOException, ClassNotFoundException, IllegalAccessException, InstantiationException
</pre>
<dl>
  <dd> Initializes StandardRepository. Can be called anytime for any
 reason, like when reviving form a quake. It does not need any
 additional capabilities besides those it was handed in its
 constructor.
<p>
</dl>
<a name="get(java.lang.Object)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="get"><b>get</b></a>
<pre>
 public Object get(Object key) throws <a href="ec.e.rep.steward.RepositoryKeyNotFoundException.html#_top_">RepositoryKeyNotFoundException</a>, IOException
</pre>
<dl>
  <dd> Look for a given key in all caches and repositories we know
 of. Throw a RepositoryKeyNotFoundException if we cannot find
 the key. If any Repository file has been smashed, reinitialize
 all our repositories. Other repository errors may throw
 IOExceptions. <p>
<p>
</dl>
<a name="getCertificateHashtable(java.lang.Object)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getCertificateHashtable"><b>getCertificateHashtable</b></a>
<pre>
 public Hashtable getCertificateHashtable(Object key) throws IOException
</pre>
<dl>
  <dd> Returns a certificate hashtable for a given key.  Returns null
 if the key could not be found, but may throw an IOException in
 case of serious trouble and various instantion-related
 exceptions if a post-quake revival fails for some reason.
<p>
</dl>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-ec.e.rep.html">This Package</a>  <a href="Package-ec.e.rep.html">Previous</a>  <a href="Package-ec.e.rep.html">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
